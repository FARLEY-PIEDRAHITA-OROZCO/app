<!doctype html>
<html lang="es" translate="no">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="theme-color" content="#000000" />
        <meta name="description" content="Sistema de Pronósticos PLLA 3.0" />
        <meta name="google" content="notranslate" />
        <meta http-equiv="Content-Language" content="es" />
        <title>PLLA 3.0 - Sistema de Pronósticos</title>
        <script>
            // DOM Protection for production environment
            window.__REACT_READY__ = false;
            window.__IS_LOCAL__ = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
            
            if (!window.__IS_LOCAL__) {
                const originalInsertBefore = Node.prototype.insertBefore;
                Node.prototype.insertBefore = function(newNode, referenceNode) {
                    const reactRoot = document.getElementById('root');
                    if (reactRoot && this.contains && this.contains(reactRoot) && !window.__REACT_READY__) {
                        try {
                            return originalInsertBefore.call(this, newNode, referenceNode);
                        } catch (e) {
                            console.warn('DOM operation intercepted:', e.message);
                            return newNode;
                        }
                    }
                    return originalInsertBefore.call(this, newNode, referenceNode);
                };
            }
        </script>
    </head>
    <body>
        <noscript>You need to enable JavaScript to run this app.</noscript>
        <div id="react-container" style="isolation: isolate;">
            <div id="root"></div>
        </div>
        
        <!-- Emergent Badge - Solo visible en producción -->
        <a
            id="emergent-badge"
            target="_blank"
            href="https://app.emergent.sh/?utm_source=emergent-badge"
            style="
                display: none;
                align-items: center;
                position: fixed;
                bottom: 20px;
                right: 20px;
                text-decoration: none;
                padding: 6px 10px;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                font-size: 12px;
                z-index: 9999;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
                border-radius: 8px;
                background-color: #ffffff;
                border: 1px solid rgba(255, 255, 255, 0.25);
            "
        >
            <div style="display: flex; flex-direction: row; align-items: center">
                <img
                    style="width: 20px; height: 20px; margin-right: 8px"
                    src="https://avatars.githubusercontent.com/in/1201222?s=120&u=2686cf91179bbafbc7a71bfbc43004cf9ae1acea&v=4"
                />
                <p style="color: #000000; font-size: 12px; margin-bottom: 0;">
                    Made with Emergent
                </p>
            </div>
        </a>
        
        <script>
            // Solo cargar scripts externos en producción (no en localhost)
            function loadExternalScripts() {
                // No cargar en desarrollo local
                if (window.__IS_LOCAL__) {
                    console.log('[PLLA 3.0] Modo desarrollo local - scripts externos deshabilitados');
                    return;
                }
                
                // Mostrar badge de Emergent solo en producción
                var badge = document.getElementById('emergent-badge');
                if (badge) {
                    badge.style.display = 'flex';
                }
                
                // Cargar script de Emergent
                var emergentScript = document.createElement('script');
                emergentScript.src = 'https://assets.emergent.sh/scripts/emergent-main.js';
                emergentScript.async = true;
                document.body.appendChild(emergentScript);
                
                // PostHog Analytics (solo producción)
                !(function (t, e) {
                    var o, n, p, r;
                    e.__SV ||
                        ((window.posthog = e),
                        (e._i = []),
                        (e.init = function (i, s, a) {
                            function g(t, e) {
                                var o = e.split(".");
                                2 == o.length && ((t = t[o[0]]), (e = o[1])),
                                    (t[e] = function () {
                                        t.push([e].concat(Array.prototype.slice.call(arguments, 0)));
                                    });
                            }
                            ((p = t.createElement("script")).type = "text/javascript"),
                                (p.crossOrigin = "anonymous"),
                                (p.async = !0),
                                (p.src = s.api_host.replace(".i.posthog.com", "-assets.i.posthog.com") + "/static/array.js"),
                                (r = t.getElementsByTagName("script")[0]).parentNode.insertBefore(p, r);
                            var u = e;
                            for (
                                void 0 !== a ? (u = e[a] = []) : (a = "posthog"),
                                    u.people = u.people || [],
                                    u.toString = function (t) {
                                        var e = "posthog";
                                        return "posthog" !== a && (e += "." + a), t || (e += " (stub)"), e;
                                    },
                                    u.people.toString = function () {
                                        return u.toString(1) + ".people (stub)";
                                    },
                                    o = "init capture identify".split(" "),
                                    n = 0;
                                n < o.length;
                                n++
                            )
                                g(u, o[n]);
                            e._i.push([i, s, a]);
                        }),
                        (e.__SV = 1));
                })(document, window.posthog || []);
                posthog.init("phc_yJW1VjHGGwmCbbrtczfqqNxgBDbhlhOWcdzcIJEOTFE", {
                    api_host: "https://us.i.posthog.com",
                    person_profiles: "identified_only",
                });
            }
            
            window.__loadExternalScripts = loadExternalScripts;
        </script>
    </body>
</html>
